# ğŸš€ Reddit Automation BDD Test Suite

A professional-grade automation framework for Reddit interactions using Playwright, BDD, and comprehensive reporting.

## âœ¨ Features

- ğŸ­ **BDD Testing** with pytest-bdd and Gherkin scenarios
- ğŸ“¹ **Video Recording** of test execution with timestamp naming
- ğŸ“Š **Allure Reports** with embedded videos and screenshots  
- ğŸ¨ **Beautiful HTML Reports** for test results
- ğŸ›¡ï¸ **Anti-Detection** measures for reliable automation
- ğŸ”§ **Page Object Model** for maintainable code structure
- ğŸ¯ **Smart Post Detection** (excludes pinned posts and ads)
- ğŸ® **Gaming Content Analysis** with Nintendo detection logic

## ğŸ—ï¸ Architecture

```
â”œâ”€â”€ features/
â”‚   â””â”€â”€ reddit_automation.feature     # BDD Gherkin scenarios
â”œâ”€â”€ step_definitions/
â”‚   â””â”€â”€ reddit_steps.py              # Step implementations with Allure annotations
â”œâ”€â”€ pages/
â”‚   â”œâ”€â”€ base_page.py                 # Base page class
â”‚   â”œâ”€â”€ reddit_page.py               # Main Reddit page interactions
â”‚   â”œâ”€â”€ login_page.py                # Login functionality
â”‚   â””â”€â”€ gaming_subreddit_page.py     # Gaming subreddit operations
â”œâ”€â”€ videos/                          # ğŸ“¹ Recorded test videos
â”œâ”€â”€ allure-results/                  # ğŸ“Š Allure test results
â”œâ”€â”€ allure-report/                   # ğŸ“ˆ Generated Allure reports
â”œâ”€â”€ reports/                         # ğŸ“‹ HTML test reports
â”œâ”€â”€ conftest.py                      # Pytest configuration with video recording
â”œâ”€â”€ test_runner.py                   # Enhanced test execution with reporting
â””â”€â”€ requirements.txt                 # Dependencies including Allure
```

## ğŸš€ Quick Start

### 1. Setup Environment
```bash
# Install all dependencies and setup
python setup.py

# Create credentials file
cp .env.example .env
# Edit .env with your Reddit credentials
```

### 2. Run Tests with Video Recording
```bash
python test_runner.py
```

### 3. View Results
- **Allure Report**: Opens automatically in browser with embedded videos
- **HTML Report**: Available in `reports/` directory
- **Videos**: Saved in `videos/` with test name and timestamp

## ğŸ“¹ Video Recording Features

- **Automatic Recording**: Every test execution is recorded
- **Smart Naming**: Videos named as `{test_name}_{timestamp}.webm`
- **High Quality**: 1920x1080 resolution recording
- **Embedded Reports**: Videos automatically attached to Allure reports

Example video name: `test_reddit_automation_2024-06-10_14-30-25.webm`

## ğŸ“Š Allure Reporting Features

- **Epic/Feature/Story Structure**: Organized test hierarchy
- **Step-by-Step Screenshots**: Visual documentation of each action
- **Video Attachments**: Full test execution videos embedded
- **Detailed Logs**: Console output and test metadata
- **Voting Decision Tracking**: Nintendo content analysis results
- **Timestamps**: Test execution and completion times

## ğŸ¯ Test Scenarios

### Main Test Flow:
1. **Navigate** to old.reddit.com
2. **Login** using new Reddit authentication flow
3. **Navigate** to r/gaming subreddit
4. **Identify** second non-pinned, non-ad post
5. **Analyze** post title for Nintendo content
6. **Vote** accordingly (ğŸ‘ for Nintendo content, ğŸ‘ for others)
7. **Logout** and verify logout success

## ğŸ›¡ï¸ Anti-Detection Features

- **Firefox Browser** (less detected than Chrome)
- **Realistic User Agents** and headers
- **JavaScript Stealth Injection** to hide automation
- **Human-like Delays** and interactions
- **Custom Element Handling** for modern web components

## ğŸ“‹ Requirements

- Python 3.8+
- Node.js (for Allure CLI)
- Firefox browser (auto-installed by Playwright)

## ğŸ”§ Advanced Configuration

### Video Settings
Modify `conftest.py` to change video quality:
```python
record_video_size={"width": 1920, "height": 1080}
```